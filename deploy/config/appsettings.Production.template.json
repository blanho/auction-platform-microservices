{
  "$schema": "https://json.schemastore.org/appsettings.json",
  "AllowedHosts": "*",
  
  "Logging": {
    "ServiceName": "${SERVICE_NAME}",
    "Environment": "production",
    "MinimumLevel": "Warning",
    "EnableConsole": true,
    "UseJsonFormat": true,
    
    "Overrides": {
      "Microsoft.AspNetCore.Authentication": "Warning",
      "Microsoft.EntityFrameworkCore.Database.Command": "Warning",
      "Grpc.AspNetCore.Server.ServerCallHandler": "Warning"
    },
    
    "File": {
      "Enabled": false,
      "Path": "logs/${SERVICE_NAME}-.log",
      "FileSizeLimitBytes": 10000000,
      "RetainedFileCountLimit": 7
    },
    
    "Elasticsearch": {
      "Enabled": true,
      "Url": "${ELASTICSEARCH_URL}",
      "IndexFormat": "logs-{0:yyyy.MM.dd}",
      "Username": "${ELASTICSEARCH_USERNAME}",
      "Password": "${ELASTICSEARCH_PASSWORD}",
      "BatchPostingLimit": 50,
      "Period": "00:00:02"
    },
    
    "Seq": {
      "Enabled": false,
      "ServerUrl": "${SEQ_URL}",
      "ApiKey": "${SEQ_API_KEY}"
    }
  },
  
  "Serilog": {
    "Using": ["Serilog.Sinks.Console", "Serilog.Sinks.Elasticsearch"],
    "MinimumLevel": {
      "Default": "Warning",
      "Override": {
        "Microsoft": "Warning",
        "Microsoft.Hosting.Lifetime": "Information",
        "Microsoft.AspNetCore.Authentication": "Warning",
        "System": "Warning",
        "Grpc": "Warning",
        "MassTransit": "Warning"
      }
    },
    "Enrich": ["FromLogContext", "WithMachineName", "WithEnvironmentName"]
  },
  
  "Kestrel": {
    "HttpPort": 8080,
    "GrpcPort": 8081
  },
  
  "Observability": {
    "ServiceName": "${SERVICE_NAME}",
    "ServiceVersion": "1.0.0",
    "Environment": "production",
    "OtlpEndpoint": "${OTLP_ENDPOINT}",
    "EnableConsoleExporter": false
  }
}
